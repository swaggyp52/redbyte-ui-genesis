import { describe, expect, it } from 'vitest';
import { getTokensForVariant, tokensDarkNeon, tokensLightFrost, tokensToCssVariables } from './index';

const sortObject = (input: Record<string, string>): Record<string, string> =>
  Object.fromEntries(Object.entries(input).sort(([a], [b]) => a.localeCompare(b)));

describe('rb-tokens', () => {
  it('exposes dark and light token structures', () => {
    expect(tokensDarkNeon).toMatchInlineSnapshot(`
      {
        "color": {
          "accent": {
            "50": "#7cf0f00a",
            "100": "#7cf0f014",
            "200": "#7cf0f01f",
            "300": "#7cf0f033",
            "400": "#7cf0f052",
            "500": "#7cf0f073",
            "600": "#7cf0f094",
            "700": "#7cf0f0b8",
            "800": "#7cf0f0db",
            "900": "#7cf0f0ff",
          },
          "danger": {
            "50": "#ff5f6d0a",
            "100": "#ff5f6d14",
            "200": "#ff5f6d1f",
            "300": "#ff5f6d33",
            "400": "#ff5f6d52",
            "500": "#ff5f6d73",
            "600": "#ff5f6d94",
            "700": "#ff5f6db8",
            "800": "#ff5f6ddb",
            "900": "#ff5f6dff",
          },
          "neutral": {
            "50": "#8ca0b30a",
            "100": "#8ca0b314",
            "200": "#8ca0b31f",
            "300": "#8ca0b333",
            "400": "#8ca0b352",
            "500": "#8ca0b373",
            "600": "#8ca0b394",
            "700": "#8ca0b3b8",
            "800": "#8ca0b3db",
            "900": "#8ca0b3ff",
          },
          "primary": {
            "50": "#6c7cff0a",
            "100": "#6c7cff14",
            "200": "#6c7cff1f",
            "300": "#6c7cff33",
            "400": "#6c7cff52",
            "500": "#6c7cff73",
            "600": "#6c7cff94",
            "700": "#6c7cffb8",
            "800": "#6c7cffdb",
            "900": "#6c7cffff",
          },
          "success": {
            "50": "#6cfab60a",
            "100": "#6cfab614",
            "200": "#6cfab61f",
            "300": "#6cfab633",
            "400": "#6cfab652",
            "500": "#6cfab673",
            "600": "#6cfab694",
            "700": "#6cfab6b8",
            "800": "#6cfab6db",
            "900": "#6cfab6ff",
          },
          "surface": {
            "50": "#0d10170a",
            "100": "#0d101714",
            "200": "#0d10171f",
            "300": "#0d101733",
            "400": "#0d101752",
            "500": "#0d101773",
            "600": "#0d101794",
            "700": "#0d1017b8",
            "800": "#0d1017db",
            "900": "#0d1017ff",
          },
          "warning": {
            "50": "#ffc8600a",
            "100": "#ffc86014",
            "200": "#ffc8601f",
            "300": "#ffc86033",
            "400": "#ffc86052",
            "500": "#ffc86073",
            "600": "#ffc86094",
            "700": "#ffc860b8",
            "800": "#ffc860db",
            "900": "#ffc860ff",
          },
        },
        "motion": {
          "duration": {
            "fast": "150ms",
            "instant": "75ms",
            "normal": "240ms",
            "slow": "360ms",
          },
          "easing": {
            "emphasized": "cubic-bezier(0.2, 0.8, 0.2, 1)",
            "entrance": "cubic-bezier(0.3, 0, 0.2, 1)",
            "exit": "cubic-bezier(0.4, 0, 1, 1)",
            "standard": "cubic-bezier(0.2, 0, 0, 1)",
          },
        },
        "radius": {
          "lg": "14px",
          "md": "10px",
          "sm": "6px",
          "xl": "18px",
          "xs": "4px",
        },
        "shadow": {
          "inner": "inset 0 1px 0 rgba(255,255,255,0.06)",
          "lg": "0 18px 36px rgba(0,0,0,0.28)",
          "md": "0 8px 24px rgba(0,0,0,0.18)",
          "sm": "0 1px 2px rgba(0,0,0,0.18)",
        },
        "spacing": {
          "2xl": "32px",
          "lg": "16px",
          "md": "12px",
          "sm": "8px",
          "xl": "24px",
          "xs": "4px",
        },
        "typography": {
          "fontFamily": "\"Inter\", system-ui, -apple-system, sans-serif",
          "lineHeight": {
            "normal": "1.4",
            "relaxed": "1.6",
            "snug": "1.25",
            "tight": "1.1",
          },
          "size": {
            "lg": "20px",
            "md": "16px",
            "sm": "14px",
            "xl": "24px",
            "xs": "12px",
          },
          "weight": {
            "bold": 700,
            "medium": 600,
            "regular": 400,
          },
        },
      }
    `);
    expect(tokensLightFrost).toMatchInlineSnapshot(`
      {
        "color": {
          "accent": {
            "50": "#15b8d6ff",
            "100": "#15b8d6f2",
            "200": "#15b8d6e6",
            "300": "#15b8d6d9",
            "400": "#15b8d6cc",
            "500": "#15b8d6bf",
            "600": "#15b8d6b3",
            "700": "#15b8d6a6",
            "800": "#15b8d699",
            "900": "#15b8d68c",
          },
          "danger": {
            "50": "#e23e57ff",
            "100": "#e23e57f2",
            "200": "#e23e57e6",
            "300": "#e23e57d9",
            "400": "#e23e57cc",
            "500": "#e23e57bf",
            "600": "#e23e57b3",
            "700": "#e23e57a6",
            "800": "#e23e5799",
            "900": "#e23e578c",
          },
          "neutral": {
            "50": "#1d1f21ff",
            "100": "#1d1f21f2",
            "200": "#1d1f21e6",
            "300": "#1d1f21d9",
            "400": "#1d1f21cc",
            "500": "#1d1f21bf",
            "600": "#1d1f21b3",
            "700": "#1d1f21a6",
            "800": "#1d1f2199",
            "900": "#1d1f218c",
          },
          "primary": {
            "50": "#3b5bd6ff",
            "100": "#3b5bd6f2",
            "200": "#3b5bd6e6",
            "300": "#3b5bd6d9",
            "400": "#3b5bd6cc",
            "500": "#3b5bd6bf",
            "600": "#3b5bd6b3",
            "700": "#3b5bd6a6",
            "800": "#3b5bd699",
            "900": "#3b5bd68c",
          },
          "success": {
            "50": "#1f9d6eff",
            "100": "#1f9d6ef2",
            "200": "#1f9d6ee6",
            "300": "#1f9d6ed9",
            "400": "#1f9d6ecc",
            "500": "#1f9d6ebf",
            "600": "#1f9d6eb3",
            "700": "#1f9d6ea6",
            "800": "#1f9d6e99",
            "900": "#1f9d6e8c",
          },
          "surface": {
            "50": "#f6f8fbff",
            "100": "#f6f8fbf2",
            "200": "#f6f8fbe6",
            "300": "#f6f8fbd9",
            "400": "#f6f8fbcc",
            "500": "#f6f8fbbf",
            "600": "#f6f8fbb3",
            "700": "#f6f8fba6",
            "800": "#f6f8fb99",
            "900": "#f6f8fb8c",
          },
          "warning": {
            "50": "#c87b1fff",
            "100": "#c87b1ff2",
            "200": "#c87b1fe6",
            "300": "#c87b1fd9",
            "400": "#c87b1fcc",
            "500": "#c87b1fbf",
            "600": "#c87b1fb3",
            "700": "#c87b1fa6",
            "800": "#c87b1f99",
            "900": "#c87b1f8c",
          },
        },
        "motion": {
          "duration": {
            "fast": "150ms",
            "instant": "75ms",
            "normal": "240ms",
            "slow": "360ms",
          },
          "easing": {
            "emphasized": "cubic-bezier(0.2, 0.8, 0.2, 1)",
            "entrance": "cubic-bezier(0.3, 0, 0.2, 1)",
            "exit": "cubic-bezier(0.4, 0, 1, 1)",
            "standard": "cubic-bezier(0.2, 0, 0, 1)",
          },
        },
        "radius": {
          "lg": "14px",
          "md": "10px",
          "sm": "6px",
          "xl": "18px",
          "xs": "4px",
        },
        "shadow": {
          "inner": "inset 0 1px 0 rgba(255,255,255,0.06)",
          "lg": "0 18px 36px rgba(0,0,0,0.28)",
          "md": "0 8px 24px rgba(0,0,0,0.18)",
          "sm": "0 1px 2px rgba(0,0,0,0.18)",
        },
        "spacing": {
          "2xl": "32px",
          "lg": "16px",
          "md": "12px",
          "sm": "8px",
          "xl": "24px",
          "xs": "4px",
        },
        "typography": {
          "fontFamily": "\"Inter\", system-ui, -apple-system, sans-serif",
          "lineHeight": {
            "normal": "1.4",
            "relaxed": "1.6",
            "snug": "1.25",
            "tight": "1.1",
          },
          "size": {
            "lg": "20px",
            "md": "16px",
            "sm": "14px",
            "xl": "24px",
            "xs": "12px",
          },
          "weight": {
            "bold": 700,
            "medium": 600,
            "regular": 400,
          },
        },
      }
    `);
  });

  it('generates CSS variables for each theme', () => {
    const darkVariables = sortObject(tokensToCssVariables(tokensDarkNeon));
    const lightVariables = sortObject(tokensToCssVariables(tokensLightFrost));

    expect(darkVariables).toMatchInlineSnapshot(`
      {
        "--rb-color-accent-100": "#7cf0f014",
        "--rb-color-accent-200": "#7cf0f01f",
        "--rb-color-accent-300": "#7cf0f033",
        "--rb-color-accent-400": "#7cf0f052",
        "--rb-color-accent-50": "#7cf0f00a",
        "--rb-color-accent-500": "#7cf0f073",
        "--rb-color-accent-600": "#7cf0f094",
        "--rb-color-accent-700": "#7cf0f0b8",
        "--rb-color-accent-800": "#7cf0f0db",
        "--rb-color-accent-900": "#7cf0f0ff",
        "--rb-color-danger-100": "#ff5f6d14",
        "--rb-color-danger-200": "#ff5f6d1f",
        "--rb-color-danger-300": "#ff5f6d33",
        "--rb-color-danger-400": "#ff5f6d52",
        "--rb-color-danger-50": "#ff5f6d0a",
        "--rb-color-danger-500": "#ff5f6d73",
        "--rb-color-danger-600": "#ff5f6d94",
        "--rb-color-danger-700": "#ff5f6db8",
        "--rb-color-danger-800": "#ff5f6ddb",
        "--rb-color-danger-900": "#ff5f6dff",
        "--rb-color-neutral-100": "#8ca0b314",
        "--rb-color-neutral-200": "#8ca0b31f",
        "--rb-color-neutral-300": "#8ca0b333",
        "--rb-color-neutral-400": "#8ca0b352",
        "--rb-color-neutral-50": "#8ca0b30a",
        "--rb-color-neutral-500": "#8ca0b373",
        "--rb-color-neutral-600": "#8ca0b394",
        "--rb-color-neutral-700": "#8ca0b3b8",
        "--rb-color-neutral-800": "#8ca0b3db",
        "--rb-color-neutral-900": "#8ca0b3ff",
        "--rb-color-primary-100": "#6c7cff14",
        "--rb-color-primary-200": "#6c7cff1f",
        "--rb-color-primary-300": "#6c7cff33",
        "--rb-color-primary-400": "#6c7cff52",
        "--rb-color-primary-50": "#6c7cff0a",
        "--rb-color-primary-500": "#6c7cff73",
        "--rb-color-primary-600": "#6c7cff94",
        "--rb-color-primary-700": "#6c7cffb8",
        "--rb-color-primary-800": "#6c7cffdb",
        "--rb-color-primary-900": "#6c7cffff",
        "--rb-color-success-100": "#6cfab614",
        "--rb-color-success-200": "#6cfab61f",
        "--rb-color-success-300": "#6cfab633",
        "--rb-color-success-400": "#6cfab652",
        "--rb-color-success-50": "#6cfab60a",
        "--rb-color-success-500": "#6cfab673",
        "--rb-color-success-600": "#6cfab694",
        "--rb-color-success-700": "#6cfab6b8",
        "--rb-color-success-800": "#6cfab6db",
        "--rb-color-success-900": "#6cfab6ff",
        "--rb-color-surface-100": "#0d101714",
        "--rb-color-surface-200": "#0d10171f",
        "--rb-color-surface-300": "#0d101733",
        "--rb-color-surface-400": "#0d101752",
        "--rb-color-surface-50": "#0d10170a",
        "--rb-color-surface-500": "#0d101773",
        "--rb-color-surface-600": "#0d101794",
        "--rb-color-surface-700": "#0d1017b8",
        "--rb-color-surface-800": "#0d1017db",
        "--rb-color-surface-900": "#0d1017ff",
        "--rb-color-warning-100": "#ffc86014",
        "--rb-color-warning-200": "#ffc8601f",
        "--rb-color-warning-300": "#ffc86033",
        "--rb-color-warning-400": "#ffc86052",
        "--rb-color-warning-50": "#ffc8600a",
        "--rb-color-warning-500": "#ffc86073",
        "--rb-color-warning-600": "#ffc86094",
        "--rb-color-warning-700": "#ffc860b8",
        "--rb-color-warning-800": "#ffc860db",
        "--rb-color-warning-900": "#ffc860ff",
        "--rb-motion-duration-fast": "150ms",
        "--rb-motion-duration-instant": "75ms",
        "--rb-motion-duration-normal": "240ms",
        "--rb-motion-duration-slow": "360ms",
        "--rb-motion-easing-emphasized": "cubic-bezier(0.2, 0.8, 0.2, 1)",
        "--rb-motion-easing-entrance": "cubic-bezier(0.3, 0, 0.2, 1)",
        "--rb-motion-easing-exit": "cubic-bezier(0.4, 0, 1, 1)",
        "--rb-motion-easing-standard": "cubic-bezier(0.2, 0, 0, 1)",
        "--rb-radius-lg": "14px",
        "--rb-radius-md": "10px",
        "--rb-radius-sm": "6px",
        "--rb-radius-xl": "18px",
        "--rb-radius-xs": "4px",
        "--rb-shadow-inner": "inset 0 1px 0 rgba(255,255,255,0.06)",
        "--rb-shadow-lg": "0 18px 36px rgba(0,0,0,0.28)",
        "--rb-shadow-md": "0 8px 24px rgba(0,0,0,0.18)",
        "--rb-shadow-sm": "0 1px 2px rgba(0,0,0,0.18)",
        "--rb-spacing-2xl": "32px",
        "--rb-spacing-lg": "16px",
        "--rb-spacing-md": "12px",
        "--rb-spacing-sm": "8px",
        "--rb-spacing-xl": "24px",
        "--rb-spacing-xs": "4px",
        "--rb-typography-font-family": "\\\"Inter\\\", system-ui, -apple-system, sans-serif",
        "--rb-typography-line-height-normal": "1.4",
        "--rb-typography-line-height-relaxed": "1.6",
        "--rb-typography-line-height-snug": "1.25",
        "--rb-typography-line-height-tight": "1.1",
        "--rb-typography-size-lg": "20px",
        "--rb-typography-size-md": "16px",
        "--rb-typography-size-sm": "14px",
        "--rb-typography-size-xl": "24px",
        "--rb-typography-size-xs": "12px",
        "--rb-typography-weight-bold": "700",
        "--rb-typography-weight-medium": "600",
        "--rb-typography-weight-regular": "400",
      }
    `);
    expect(lightVariables).toMatchInlineSnapshot(`
      {
        "--rb-color-accent-100": "#15b8d6f2",
        "--rb-color-accent-200": "#15b8d6e6",
        "--rb-color-accent-300": "#15b8d6d9",
        "--rb-color-accent-400": "#15b8d6cc",
        "--rb-color-accent-50": "#15b8d6ff",
        "--rb-color-accent-500": "#15b8d6bf",
        "--rb-color-accent-600": "#15b8d6b3",
        "--rb-color-accent-700": "#15b8d6a6",
        "--rb-color-accent-800": "#15b8d699",
        "--rb-color-accent-900": "#15b8d68c",
        "--rb-color-danger-100": "#e23e57f2",
        "--rb-color-danger-200": "#e23e57e6",
        "--rb-color-danger-300": "#e23e57d9",
        "--rb-color-danger-400": "#e23e57cc",
        "--rb-color-danger-50": "#e23e57ff",
        "--rb-color-danger-500": "#e23e57bf",
        "--rb-color-danger-600": "#e23e57b3",
        "--rb-color-danger-700": "#e23e57a6",
        "--rb-color-danger-800": "#e23e5799",
        "--rb-color-danger-900": "#e23e578c",
        "--rb-color-neutral-100": "#1d1f21f2",
        "--rb-color-neutral-200": "#1d1f21e6",
        "--rb-color-neutral-300": "#1d1f21d9",
        "--rb-color-neutral-400": "#1d1f21cc",
        "--rb-color-neutral-50": "#1d1f21ff",
        "--rb-color-neutral-500": "#1d1f21bf",
        "--rb-color-neutral-600": "#1d1f21b3",
        "--rb-color-neutral-700": "#1d1f21a6",
        "--rb-color-neutral-800": "#1d1f2199",
        "--rb-color-neutral-900": "#1d1f218c",
        "--rb-color-primary-100": "#3b5bd6f2",
        "--rb-color-primary-200": "#3b5bd6e6",
        "--rb-color-primary-300": "#3b5bd6d9",
        "--rb-color-primary-400": "#3b5bd6cc",
        "--rb-color-primary-50": "#3b5bd6ff",
        "--rb-color-primary-500": "#3b5bd6bf",
        "--rb-color-primary-600": "#3b5bd6b3",
        "--rb-color-primary-700": "#3b5bd6a6",
        "--rb-color-primary-800": "#3b5bd699",
        "--rb-color-primary-900": "#3b5bd68c",
        "--rb-color-success-100": "#1f9d6ef2",
        "--rb-color-success-200": "#1f9d6ee6",
        "--rb-color-success-300": "#1f9d6ed9",
        "--rb-color-success-400": "#1f9d6ecc",
        "--rb-color-success-50": "#1f9d6eff",
        "--rb-color-success-500": "#1f9d6ebf",
        "--rb-color-success-600": "#1f9d6eb3",
        "--rb-color-success-700": "#1f9d6ea6",
        "--rb-color-success-800": "#1f9d6e99",
        "--rb-color-success-900": "#1f9d6e8c",
        "--rb-color-surface-100": "#f6f8fbf2",
        "--rb-color-surface-200": "#f6f8fbe6",
        "--rb-color-surface-300": "#f6f8fbd9",
        "--rb-color-surface-400": "#f6f8fbcc",
        "--rb-color-surface-50": "#f6f8fbff",
        "--rb-color-surface-500": "#f6f8fbbf",
        "--rb-color-surface-600": "#f6f8fbb3",
        "--rb-color-surface-700": "#f6f8fba6",
        "--rb-color-surface-800": "#f6f8fb99",
        "--rb-color-surface-900": "#f6f8fb8c",
        "--rb-color-warning-100": "#c87b1ff2",
        "--rb-color-warning-200": "#c87b1fe6",
        "--rb-color-warning-300": "#c87b1fd9",
        "--rb-color-warning-400": "#c87b1fcc",
        "--rb-color-warning-50": "#c87b1fff",
        "--rb-color-warning-500": "#c87b1fbf",
        "--rb-color-warning-600": "#c87b1fb3",
        "--rb-color-warning-700": "#c87b1fa6",
        "--rb-color-warning-800": "#c87b1f99",
        "--rb-color-warning-900": "#c87b1f8c",
        "--rb-motion-duration-fast": "150ms",
        "--rb-motion-duration-instant": "75ms",
        "--rb-motion-duration-normal": "240ms",
        "--rb-motion-duration-slow": "360ms",
        "--rb-motion-easing-emphasized": "cubic-bezier(0.2, 0.8, 0.2, 1)",
        "--rb-motion-easing-entrance": "cubic-bezier(0.3, 0, 0.2, 1)",
        "--rb-motion-easing-exit": "cubic-bezier(0.4, 0, 1, 1)",
        "--rb-motion-easing-standard": "cubic-bezier(0.2, 0, 0, 1)",
        "--rb-radius-lg": "14px",
        "--rb-radius-md": "10px",
        "--rb-radius-sm": "6px",
        "--rb-radius-xl": "18px",
        "--rb-radius-xs": "4px",
        "--rb-shadow-inner": "inset 0 1px 0 rgba(255,255,255,0.06)",
        "--rb-shadow-lg": "0 18px 36px rgba(0,0,0,0.28)",
        "--rb-shadow-md": "0 8px 24px rgba(0,0,0,0.18)",
        "--rb-shadow-sm": "0 1px 2px rgba(0,0,0,0.18)",
        "--rb-spacing-2xl": "32px",
        "--rb-spacing-lg": "16px",
        "--rb-spacing-md": "12px",
        "--rb-spacing-sm": "8px",
        "--rb-spacing-xl": "24px",
        "--rb-spacing-xs": "4px",
        "--rb-typography-font-family": "\\\"Inter\\\", system-ui, -apple-system, sans-serif",
        "--rb-typography-line-height-normal": "1.4",
        "--rb-typography-line-height-relaxed": "1.6",
        "--rb-typography-line-height-snug": "1.25",
        "--rb-typography-line-height-tight": "1.1",
        "--rb-typography-size-lg": "20px",
        "--rb-typography-size-md": "16px",
        "--rb-typography-size-sm": "14px",
        "--rb-typography-size-xl": "24px",
        "--rb-typography-size-xs": "12px",
        "--rb-typography-weight-bold": "700",
        "--rb-typography-weight-medium": "600",
        "--rb-typography-weight-regular": "400",
      }
    `);
  });

  it('maps variants to token sets', () => {
    expect(getTokensForVariant('dark-neon')).toBe(tokensDarkNeon);
    expect(getTokensForVariant('light-frost')).toBe(tokensLightFrost);
  });
});
